set nocompatible

" Airline configuration.
" Airline isn't so good using unpatched console fonts.  Only enable Airline
" when GUI mode is running.
let g:pathogen_disabled = []
if ! has("gui_running")
	call add(g:pathogen_disabled, 'vim-airline')
else
	let g:airline_powerline_fonts = 1
	let g:airline#extensions#tabline#enabled = 1
	let g:airline#extensions#tabline#fnamemod = ':t'
	set laststatus=2
endif

" The font specification seems to be a wee bit different for MacVim vs gvim
" on Ubuntu.
if has("gui_macvim")
	set guifont=Fira\ Mono\ for\ Powerline:h12
else
	set guifont=Fira\ Mono\ for\ Powerline\ 12
endif

set autoindent
set ruler
filetype plugin on

execute pathogen#infect()

function StripTrailingWhitespaces()
    let l = line(".")
    let c = col(".")
    %s/\s\+$//e
    call cursor(l, c)
endfun


set ignorecase
set smartcase
set gdefault
set incsearch
set showmatch
set hlsearch
nnoremap <leader><space> :noh<cr>

set number
set cursorline


set formatoptions=crqlj         " t - autowrap to textwidth
                                " c - autowrap comments to textwidth
                                " r - autoinsert comment leader with <Enter>
                                " q - allow formatting of comments with :gq
                                " l - don't format already long lines


if has("autocmd")
  " Enable file type detection.
  " Use the default filetype settings, so that mail gets 'tw' set to 72,
  " 'cindent' is on in C files, etc.
  " Also load indent files, to automatically do language-dependent indenting.
  filetype plugin indent on
  " ...
endif

" --- Key Mappings ---
" Move to next or previous tab using standard Mac key bindings.
" I don't think these work like you think they do...already mapped by OS X
" noremap <C-Tab>:    tabnext<CR>
" noremap <C-S-Tab>:  tabprev<CR>

nnoremap <C-b> :bprev<CR>
nnoremap <C-n> :bnext<CR>

" Insert closing brace when an open brace is followed by CR.  Won't insert
" closing brace if no CR.
inoremap {<CR> {<CR>}<Esc>ko

" --- File Type Setup ---
autocmd FileType html,css,js,less setl tw=80 expandtab shiftwidth=2 softtabstop=2

" Override default Modula 'md' extension to Markddown.
autocmd BufNewFile,BufReadPost *.md set filetype=markdown

" Setup default color scheme
if has("gui_running")
	colorscheme gruvbox
	set bg=dark
else
	colorscheme atom-dark
endif

syntax on

set listchars=tab:▸·
set list

set autochdir

" Nerd Tree setup
let NERDTreeChDirMode=2
let NERDTreeMinimalUI = 1
let NERDTreeDirArrows = 1

autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTree") && b:NERDTree.isTabTree()) | q | endif

set tags=tags;/

